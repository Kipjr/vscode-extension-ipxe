{
    "$schema":"https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "name":"ipxe",
    "scopeName":"source.ipxe",
    "firstLineMatch":"^\\s*#!ipxe",
    "patterns":[
        {
            "explanation":"Line continuation",
            "match":"\\s*\\\\s*$",
            "name":"constant.character.escape"
        },
        {
            "match":"#.*",
            "name":"comment.line.number-sign"
        },
        {
            "include":"#keywords"
        },
        {
            "include":"#strings"
        },
        {
            "include":"#variable"
        }
    ],
    "repository":{
        "keywords":{
            "patterns":[
                {
                    "name":"keyword.control.ipxe",
                    "match":"\\b(if|while|for|return)\\b"
                },
                {
                    "name":"keyword.other.Boot.ipxe",
                    "match":"(?<=(^|[&|]{2}|;)\\s*)\\b(autoboot)\\b"
                },
                {
                    "name":"keyword.other.Network.ipxe",
                    "match":"(?<=(^|[&|]{2}|;)\\s*)\\b(ifstat|ifopen|ifclose|ifconf|dhcp|route|nstat|ipstat|vcreate|vdestroy)\\b"
                },
                {
                    "name":"keyword.other.Image.ipxe",
                    "match":"(?<=(^|[&|]{2}|;)\\s*)\\b(imgstat|chain|imgexec|boot|imgfetch|module|initrd|kernel|imgselect|imgload|imgfree|imgargs|imgtrust|imgverify)\\b"
                },
                {
                    "name":"keyword.other.SAN.ipxe",
                    "match":"(?<=(^|[&|]{2}|;)\\s*)\\b(sanhook|sanboot|fcstat|fcels)\\b"
                },
                {
                    "name":"keyword.other.Configuration.ipxe",
                    "match":"(?<=(^|[&|]{2}|;)\\s*)\\b(config|show|set|clear|read|inc|login)\\b"
                },
                {
                    "name":"keyword.control.Flow.ipxe",
                    "match":"(?<=(^|[&|]{2}|;)\\s*)\\b(isset|iseq|goto|exit)\\b"
                },
                {
                    "name":"keyword.control.Oprator.ipxe",
                    "match":"[&|]{2}"
                },
                {
                    "name":"keyword.other.Menu.ipxe",
                    "match":"(?<=(^|[&|]{2}|;)\\s*)\\b(menu|item|choose)\\b"
                },
                {
                    "name":"keyword.other.Certificate.ipxe",
                    "match":"(?<=(^|[&|]{2}|;)\\s*)\\b(certstat|certstore|certfree)\\b"
                },
                {
                    "name":"keyword.other.Console.ipxe",
                    "match":"(?<=(^|[&|]{2}|;)\\s*)\\b(console|colour|cpair)\\b"
                },
                {
                    "name":"keyword.other.Form.ipxe",
                    "match":"(?<=(^|[&|]{2}|;)\\s*)\\b(params|param)\\b"
                },
                {
                    "name":"keyword.other.Miscellaneous.ipxe",
                    "match":"(?<=(^|[&|]{2}|;)\\s*)\\b(echo|prompt|shell|help|sleep|reboot|poweroff|cpuid|sync|nslookup|ping|ntp|pciscan)\\b"
                },
                {
                    "name":"keyword.other.Obscure.ipxe",
                    "match":"(?<=(^|[&|]{2}|;)\\s*)\\b(lotest|pxebs|time|gdbstub|profstat)\\b"
                }
            ]
        },
        "strings":{
            "patterns":[
                {
                    "name":"string.quoted.double.ipxe",
                    "begin":"\"",
                    "end":"\"",
                    "patterns":[
                        {
                            "name":"constant.character.escape.ipxe",
                            "match":"\\\\."
                        }
                    ]
                },
                {
                    "name":"entity.other.attribute-name.label",
                    "match":"(?<=^\\s*):\\w[\\x21-\\x7e]*\\n"
                },
                {
                    "explanation":"command-line options (e.g. `--no-links` or `-c`)",
                    "match":"\\B-[^\\s=]+",
                    "name":"entity.other.attribute-name.cli_para"
                },
                {
                    "explanation":"SAN URI is defined by RFC 4173 - iSCSI",
                    "match":"\\biscsi:([^:]+):([^:]*):(\\d*):(\\d*):(iqn\\.\\d{4}-\\d{2}\\.[^:]+):\\S+",
                    "name":"entity.other.attribute-name.iscsi",
                    "captures":{
                        "1":{
                            "name":"string.quoted.single.servername"
                        },
                        "2":{
                            "name":"string.quoted.double.protocol"
                        },
                        "3":{
                            "name":"string.quoted.double.port"
                        },
                        "4":{
                            "name":"string.quoted.double.lun"
                        },
                        "5":{
                            "name":"string.quoted.triple.iqn"
                        }
                    }
                },
                {
                    "explanation":"SAN URI is defined by RFC 4173 - AoE",
                    "match":"\\baoe:e\\d.\\d\\b",
                    "name":"entity.other.attribute-name.aoe"
                },
                {
                    "explanation":"SAN URI is defined by RFC 4173 - FCP",
                    "match":"\\bfcp:([0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}):(\\d)\\b",
                    "name":"entity.other.attribute-name.iscsi",
                    "captures":{
                        "1":{
                            "name":"string.quoted.single.wwn"
                        },
                        "2":{
                            "name":"string.quoted.double.lun"
                        }
                    }
                }
            ]
        },
        "variable":{
            "patterns":[
                {
                    "name":"support.variable.setting.ipxe",
                    "begin":"(?<=\\$\\{)",
                    "end":"(?=\\})",
                    "patterns":[
                        {
                            "name":"constant.character.escape.ipxe",
                            "match":"\\\\."
                        }
                    ]
                },
                {
                    "name":"variable.other",
                    "begin":"(?<=\\config|show|set|clear|read|inc|login)\\s",
                    "end":"(?=\\n|\\s)"
                },
                {
                    "name":"support.type.setting.ipxe",
                    "match":"\\b:\\w+\\b"
                }
            ]
        }
    }
}